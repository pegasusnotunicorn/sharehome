{"ast":null,"code":"var _jsxFileName = \"/Users/1min/Documents/sharehome/src/components/Designer/DeckEditor/DeckEditor.js\";\nimport React, { useEffect } from 'react'; //custom files\n\nimport * as CardConstants from '../utils/CardConstants.js';\nimport DownloadPDFFile from '../PDFDocument/DownloadPDFFile.js';\nimport PDFDocument from '../PDFDocument/PDFDocument.js';\nimport CardPreview from './CardPreview.js';\nimport Sidebar from './Sidebar.js';\nimport CardEditor from '../CardEditor/CardEditor.js';\nimport { useStickyState, useStickyReducer } from '../utils/stickyHooks.js'; //reducer to change state in react\n//to add a new card use dispatch({ type: 'add', item: movie })\n//to remove an existing card use dispatch({ type: 'remove', index })\n//to update an existing card use dispatch({ type: 'update', index, value, property })\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'add':\n      return [...state, action.card];\n\n    case 'remove':\n      return state.filter((item, index) => {\n        //remove item at index\n        if (index === action.index) {\n          return false;\n        } // //remove item with property with value\n        // else if (item[action.property] === action.value){\n        //   return false;\n        // }\n        //every other item stays\n\n\n        return true;\n      });\n\n    case 'update':\n      return state.map((item, index) => {\n        //replace the item at index\n        if (index === action.index) {\n          return action.card;\n        } //leave every other item unchanged\n\n\n        return item;\n      });\n\n    case 'reset':\n      return [action.card];\n\n    default:\n      throw new Error();\n  }\n} //scroll to a cardPreview\n\n\nfunction scrollTo(index) {\n  let currentDOMPreview = document.getElementById(\"cardPreview\" + index);\n\n  if (!!currentDOMPreview) {\n    document.getElementById(\"cardPreview\" + index).scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }\n} //current card using local storage if it exists\n\n\nlet currentCard = CardConstants.getDefaultCardObject();\n\nif (window.localStorage.currentIndex && window.localStorage.cards) {\n  currentCard = JSON.parse(window.localStorage.cards)[JSON.parse(window.localStorage.currentIndex)];\n} //wrapper for card editor section (including input + PDF)\n\n\nfunction DeckEditor() {\n  const [cards, dispatch] = useStickyReducer(reducer, [currentCard], \"cards\");\n  ;\n  const [currentIndex, setCurrentIndex] = useStickyState(0, \"currentIndex\"); //updates the current card and updates it in the cards array\n\n  const updateCurrentCard = card => {\n    currentCard = card;\n    dispatch({\n      type: 'update',\n      index: currentIndex,\n      card: currentCard\n    }); //if i want to implement an undo, i have access to what the card WAS here\n    //just need to keep this in an array and access it whenever\n    // console.log(cards[currentIndex]);\n  }; //download the PDF file\n\n\n  const downloadAllCards = () => {\n    DownloadPDFFile( /*#__PURE__*/React.createElement(PDFDocument, {\n      cards: cards,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }), \"SHAREHOME_Deck.pdf\");\n  }; //deletes all cards and resets index to 0\n\n\n  const resetAllCards = () => {\n    currentCard = CardConstants.getDefaultCardObject();\n    dispatch({\n      type: 'reset',\n      card: currentCard\n    });\n    setCurrentIndex(0);\n  }; //adds a new card and sets the index to last\n\n\n  const addNewCard = () => {\n    currentCard = CardConstants.getDefaultCardObject();\n    dispatch({\n      type: 'add',\n      card: currentCard\n    });\n    setCurrentIndex(cards.length);\n  }; //deletes the current card and sets the index to last\n\n\n  const removeCurrentCard = () => {\n    const newLength = cards.length - 1; //if there are no more cards left, just reset\n\n    if (newLength <= 0) {\n      resetAllCards();\n    } else {\n      let newCurrentIndex = currentIndex - 1 <= 0 ? 0 : currentIndex - 1;\n      currentCard = cards[newCurrentIndex];\n      dispatch({\n        type: 'remove',\n        index: currentIndex\n      });\n      setCurrentIndex(newCurrentIndex);\n    }\n  }; //duplicates the current card and sets the index to it\n\n\n  const duplicateCurrentCard = () => {\n    currentCard = { ...currentCard\n    };\n    dispatch({\n      type: 'add',\n      card: currentCard\n    });\n    setCurrentIndex(cards.length);\n  }; //renders a specific card\n\n\n  const goToCard = cardIndex => {\n    setCurrentIndex(cardIndex);\n    currentCard = cards[cardIndex];\n    scrollTo(cardIndex);\n  }; //renders a list of buttons to keep track of all cards in the deck (click to go to it)\n\n\n  const listOfCards = cards.map((step, move) => {\n    let cardPreviewProps = {\n      key: \"cardPreview\" + move,\n      id: \"cardPreview\" + move,\n      currentCard: step,\n      currentIndex: move,\n      handleClick: goToCard,\n      //current card is this button!\n      ifCurrentCard: move === currentIndex ? \" currentCard\" : \"\",\n      number: move === currentIndex ? \"EDITING\" : move + 1\n    };\n    return /*#__PURE__*/React.createElement(CardPreview, Object.assign({}, cardPreviewProps, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }));\n  }); //focus the current card in the preview pane\n\n  useEffect(() => {\n    scrollTo(currentIndex);\n  }, [cards, currentIndex]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardEditor, {\n    cards: cards,\n    currentCard: currentCard,\n    setCurrentCard: updateCurrentCard,\n    removeCurrentCard: removeCurrentCard,\n    duplicateCurrentCard: duplicateCurrentCard,\n    viewerMagnifyValue: 32,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    downloadAllCards: downloadAllCards,\n    resetAllCards: resetAllCards,\n    addNewCard: addNewCard,\n    currentCard: currentCard,\n    currentIndex: currentIndex,\n    cards: cards,\n    listOfCards: listOfCards,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default DeckEditor;","map":{"version":3,"sources":["/Users/1min/Documents/sharehome/src/components/Designer/DeckEditor/DeckEditor.js"],"names":["React","useEffect","CardConstants","DownloadPDFFile","PDFDocument","CardPreview","Sidebar","CardEditor","useStickyState","useStickyReducer","reducer","state","action","type","card","filter","item","index","map","Error","scrollTo","currentDOMPreview","document","getElementById","scrollIntoView","behavior","currentCard","getDefaultCardObject","window","localStorage","currentIndex","cards","JSON","parse","DeckEditor","dispatch","setCurrentIndex","updateCurrentCard","downloadAllCards","resetAllCards","addNewCard","length","removeCurrentCard","newLength","newCurrentIndex","duplicateCurrentCard","goToCard","cardIndex","listOfCards","step","move","cardPreviewProps","key","id","handleClick","ifCurrentCard","number"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\n\n//custom files\nimport * as CardConstants from '../utils/CardConstants.js';\nimport DownloadPDFFile from '../PDFDocument/DownloadPDFFile.js';\nimport PDFDocument from '../PDFDocument/PDFDocument.js';\nimport CardPreview from './CardPreview.js';\nimport Sidebar from './Sidebar.js';\nimport CardEditor from '../CardEditor/CardEditor.js';\nimport { useStickyState, useStickyReducer } from '../utils/stickyHooks.js';\n\n//reducer to change state in react\n//to add a new card use dispatch({ type: 'add', item: movie })\n//to remove an existing card use dispatch({ type: 'remove', index })\n//to update an existing card use dispatch({ type: 'update', index, value, property })\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'add':\n      return [...state, action.card];\n    case 'remove':\n      return state.filter((item, index) => {\n        //remove item at index\n        if(index === action.index) {\n          return false;\n        }\n        // //remove item with property with value\n        // else if (item[action.property] === action.value){\n        //   return false;\n        // }\n        //every other item stays\n        return true;\n      });\n    case 'update':\n      return state.map((item, index) => {\n        //replace the item at index\n        if(index === action.index) {\n          return action.card;\n        }\n        //leave every other item unchanged\n        return item;\n      });\n    case 'reset':\n      return [action.card];\n    default:\n      throw new Error();\n  }\n}\n\n//scroll to a cardPreview\nfunction scrollTo(index){\n  let currentDOMPreview = document.getElementById(\"cardPreview\"+index);\n  if (!!currentDOMPreview){\n    document.getElementById(\"cardPreview\"+index).scrollIntoView({behavior:\"smooth\"});\n  }\n}\n\n//current card using local storage if it exists\nlet currentCard = CardConstants.getDefaultCardObject();\nif (window.localStorage.currentIndex && window.localStorage.cards){\n  currentCard = JSON.parse(window.localStorage.cards)[JSON.parse(window.localStorage.currentIndex)];\n}\n\n//wrapper for card editor section (including input + PDF)\nfunction DeckEditor(){\n  const [cards, dispatch] = useStickyReducer(reducer, [currentCard], \"cards\");;\n  const [currentIndex, setCurrentIndex] = useStickyState(0, \"currentIndex\");\n\n  //updates the current card and updates it in the cards array\n  const updateCurrentCard = (card) => {\n    currentCard = card;\n    dispatch({\n      type: 'update',\n      index: currentIndex,\n      card: currentCard\n    });\n\n    //if i want to implement an undo, i have access to what the card WAS here\n    //just need to keep this in an array and access it whenever\n    // console.log(cards[currentIndex]);\n  }\n\n  //download the PDF file\n  const downloadAllCards = () => {\n    DownloadPDFFile(<PDFDocument\n      cards={cards}\n    />, \"SHAREHOME_Deck.pdf\");\n  }\n\n  //deletes all cards and resets index to 0\n  const resetAllCards = () => {\n    currentCard = CardConstants.getDefaultCardObject();\n    dispatch({\n      type: 'reset',\n      card: currentCard\n    });\n    setCurrentIndex(0);\n  }\n\n  //adds a new card and sets the index to last\n  const addNewCard = () => {\n    currentCard = CardConstants.getDefaultCardObject();\n    dispatch({\n      type: 'add',\n      card: currentCard\n    });\n    setCurrentIndex(cards.length);\n  }\n\n  //deletes the current card and sets the index to last\n  const removeCurrentCard = () => {\n    const newLength = cards.length - 1;\n    //if there are no more cards left, just reset\n    if (newLength <= 0){\n      resetAllCards();\n    }\n    else {\n      let newCurrentIndex = (currentIndex - 1 <=0 ) ? 0 : currentIndex - 1;\n      currentCard = cards[newCurrentIndex];\n      dispatch({\n        type: 'remove',\n        index: currentIndex\n      });\n      setCurrentIndex(newCurrentIndex);\n    }\n  }\n\n  //duplicates the current card and sets the index to it\n  const duplicateCurrentCard = () => {\n    currentCard = {...currentCard};\n    dispatch({\n      type: 'add',\n      card: currentCard\n    });\n    setCurrentIndex(cards.length);\n  }\n\n  //renders a specific card\n  const goToCard = (cardIndex) => {\n    setCurrentIndex(cardIndex);\n    currentCard = cards[cardIndex];\n    scrollTo(cardIndex);\n  }\n\n  //renders a list of buttons to keep track of all cards in the deck (click to go to it)\n  const listOfCards = cards.map((step, move) => {\n\n    let cardPreviewProps = {\n      key: \"cardPreview\" + move,\n      id : \"cardPreview\" + move,\n      currentCard: step,\n      currentIndex: move,\n      handleClick: goToCard,\n      //current card is this button!\n      ifCurrentCard : (move === currentIndex) ? \" currentCard\" : \"\",\n      number : (move === currentIndex) ? \"EDITING\" : move + 1,\n    }\n\n    return (<CardPreview {...cardPreviewProps}/>);\n  });\n\n  //focus the current card in the preview pane\n  useEffect(()=>{\n    scrollTo(currentIndex);\n  }, [cards, currentIndex]);\n\n  return (\n    <div>\n      <CardEditor\n        cards={cards}\n        currentCard={currentCard}\n        setCurrentCard={updateCurrentCard}\n        removeCurrentCard={removeCurrentCard}\n        duplicateCurrentCard={duplicateCurrentCard}\n        viewerMagnifyValue={32}\n      />\n      <Sidebar\n      downloadAllCards={downloadAllCards}\n      resetAllCards={resetAllCards}\n      addNewCard={addNewCard}\n      currentCard={currentCard}\n      currentIndex={currentIndex}\n      cards={cards}\n      listOfCards={listOfCards}\n      />\n    </div>\n  );\n}\n\nexport default DeckEditor;\n"]},"metadata":{},"sourceType":"module"}