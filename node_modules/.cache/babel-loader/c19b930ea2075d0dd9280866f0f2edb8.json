{"ast":null,"code":"var _jsxFileName = \"/Users/1min/Documents/sharehome/src/components/CardEditor/CardEditor.js\";\nimport React, { useState } from 'react';\nimport { PDFViewer } from '@react-pdf/renderer'; //custom files\n\nimport PDFDocument from './PDFDocument.js';\nimport downloadPDFFile from '../utils/downloadPDFFile.js';\nimport { getImageObject, magnifyValue } from './CardConstants.js';\nimport { viewerHeight, viewerWidth } from '../../css/PDFViewerDynamicStyles.js';\nimport CardViewer from './CardViewer.js';\nimport InputWrapper from './InputWrapper.js'; //wrapper for card editor section (including input + PDF)\n//needs to get via props, the currentCard and setter for changing currentCard properties\n\nfunction CardEditor(props) {\n  const currentCard = props.currentCard;\n  const setCurrentCard = props.setCurrentCard; //returns a new card details object with newValue for newProp\n\n  const updateAndReturnCurrentCard = (newProp, newValue) => {\n    return { ...currentCard,\n      [newProp]: newValue\n    };\n  }; //event handlers for inputs\n\n\n  const handleInputChange = e => {\n    switch (e.target.name) {\n      case 'image':\n        if (e.target.files[0]) {\n          const tempImageURL = URL.createObjectURL(e.target.files[0]);\n          const tempImageName = e.target.files[0].name; //get new details (width / height) of uploaded image and generate a new image object\n\n          let img = new Image();\n\n          img.onload = function () {\n            let tempCard = updateAndReturnCurrentCard(\"image\", getImageObject(tempImageURL, tempImageName, img.width, img.height));\n            setCurrentCard(tempCard);\n          };\n\n          img.src = tempImageURL;\n        }\n\n        break;\n\n      case 'download':\n        downloadPDFFile( /*#__PURE__*/React.createElement(PDFDocument, {\n          cards: props.cards,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 25\n          }\n        }), currentCard.name + \".pdf\");\n        break;\n\n      default:\n        setCurrentCard(updateAndReturnCurrentCard(e.target.name, e.target.value));\n        break;\n    }\n  }; //handling image movement\n\n\n  const [startingCoords, setStartingCoords] = useState(false); //set starting coordinates on mouse down\n\n  const handleMouseDown = e => {\n    let mouseXY = getMouseXY(e);\n    setStartingCoords({\n      x: mouseXY.x,\n      y: mouseXY.y\n    });\n  };\n\n  const handleMouseUp = e => {\n    setStartingCoords(false);\n  };\n\n  const handleMouseMove = e => {\n    //if mouse down\n    if (startingCoords) {\n      let mouseXY = getMouseXY(e);\n      let deltaX = startingCoords.x - mouseXY.x;\n      let deltaY = startingCoords.y - mouseXY.y;\n      setStartingCoords({\n        x: mouseXY.x,\n        y: mouseXY.y\n      }); //dont let the image move outside of the bounds of the viewer\n\n      let newX = currentCard.image.viewerX - deltaX;\n      let newY = currentCard.image.viewerY - deltaY;\n      newX = newX > 0 ? 0 : newX;\n      newX = newX < -(currentCard.image.viewerWidth - viewerWidth) ? -(currentCard.image.viewerWidth - viewerWidth) : newX;\n      newY = newY > 0 ? 0 : newY;\n      newY = newY < -(currentCard.image.viewerHeight - viewerHeight) ? -(currentCard.image.viewerHeight - viewerHeight) : newY; //click to drag/move image\n\n      let tempCard = updateAndReturnCurrentCard(\"image\", { ...currentCard.image,\n        x: Math.round(newX / magnifyValue),\n        //need to round cuz react-pdf doesnt like decimals\n        y: Math.round(newY / magnifyValue),\n        viewerX: newX,\n        viewerY: newY\n      });\n      setCurrentCard(tempCard);\n    }\n  }; //debug how PDF looks faster with PDFViewer built into browser, so you dont have to download each time\n\n\n  let embeddedPDF = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"EmbeddedPDFViewer\",\n    style: {\n      width: viewerWidth,\n      height: viewerHeight\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  });\n\n  if (!startingCoords) {\n    embeddedPDF = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(PDFViewer, {\n      className: \"EmbeddedPDFViewer\",\n      width: viewerWidth,\n      height: viewerHeight,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(PDFDocument, {\n      cards: props.cards,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }, \"(\", currentCard.image.x + \", \" + currentCard.image.y, \")\"));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardViewer, {\n    currentCard: currentCard,\n    handleMouseDown: handleMouseDown,\n    handleMouseUp: handleMouseUp,\n    handleMouseMove: handleMouseMove,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }), embeddedPDF), /*#__PURE__*/React.createElement(InputWrapper, {\n    handleInputChange: handleInputChange,\n    currentCard: currentCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }));\n}\n\nfunction getMouseXY(e) {\n  let rect = e.currentTarget.getBoundingClientRect();\n  return {\n    x: e.clientX - rect.left,\n    //x position within the element.\n    y: e.clientY - rect.top //y position within the element.\n\n  };\n}\n\nexport default CardEditor;","map":{"version":3,"sources":["/Users/1min/Documents/sharehome/src/components/CardEditor/CardEditor.js"],"names":["React","useState","PDFViewer","PDFDocument","downloadPDFFile","getImageObject","magnifyValue","viewerHeight","viewerWidth","CardViewer","InputWrapper","CardEditor","props","currentCard","setCurrentCard","updateAndReturnCurrentCard","newProp","newValue","handleInputChange","e","target","name","files","tempImageURL","URL","createObjectURL","tempImageName","img","Image","onload","tempCard","width","height","src","cards","value","startingCoords","setStartingCoords","handleMouseDown","mouseXY","getMouseXY","x","y","handleMouseUp","handleMouseMove","deltaX","deltaY","newX","image","viewerX","newY","viewerY","Math","round","embeddedPDF","rect","currentTarget","getBoundingClientRect","clientX","left","clientY","top"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { PDFViewer } from '@react-pdf/renderer';\n\n//custom files\nimport PDFDocument from './PDFDocument.js';\nimport downloadPDFFile from '../utils/downloadPDFFile.js';\nimport { getImageObject, magnifyValue } from './CardConstants.js';\nimport { viewerHeight, viewerWidth } from '../../css/PDFViewerDynamicStyles.js';\nimport CardViewer from './CardViewer.js';\nimport InputWrapper from './InputWrapper.js';\n\n//wrapper for card editor section (including input + PDF)\n//needs to get via props, the currentCard and setter for changing currentCard properties\nfunction CardEditor(props){\n  const currentCard = props.currentCard;\n  const setCurrentCard = props.setCurrentCard;\n\n  //returns a new card details object with newValue for newProp\n  const updateAndReturnCurrentCard = (newProp, newValue) => {\n    return {\n      ...currentCard,\n      [newProp]: newValue\n    }\n  }\n\n  //event handlers for inputs\n  const handleInputChange = (e) => {\n    switch (e.target.name) {\n      case 'image':\n        if (e.target.files[0]){\n          const tempImageURL = URL.createObjectURL(e.target.files[0]);\n          const tempImageName = e.target.files[0].name;\n\n          //get new details (width / height) of uploaded image and generate a new image object\n          let img = new Image();\n          img.onload = function () {\n            let tempCard = updateAndReturnCurrentCard(\"image\", getImageObject(\n              tempImageURL,\n              tempImageName,\n              img.width,\n              img.height,\n            ));\n            setCurrentCard(tempCard);\n          };\n          img.src = tempImageURL;\n        }\n        break;\n      case 'download':\n        downloadPDFFile(<PDFDocument\n          cards={props.cards}\n        />, currentCard.name + \".pdf\");\n        break;\n      default:\n        setCurrentCard(updateAndReturnCurrentCard(e.target.name, e.target.value));\n        break;\n    }\n  }\n\n  //handling image movement\n  const [startingCoords, setStartingCoords] = useState(false);\n\n  //set starting coordinates on mouse down\n  const handleMouseDown = (e) => {\n    let mouseXY = getMouseXY(e);\n    setStartingCoords({\n      x: mouseXY.x,\n      y: mouseXY.y\n    });\n  }\n  const handleMouseUp = (e) => {\n    setStartingCoords(false);\n  }\n  const handleMouseMove = (e) => {\n    //if mouse down\n    if (startingCoords){\n      let mouseXY = getMouseXY(e);\n      let deltaX = startingCoords.x - mouseXY.x;\n      let deltaY = startingCoords.y - mouseXY.y;\n\n      setStartingCoords({\n        x: mouseXY.x,\n        y: mouseXY.y,\n      });\n\n      //dont let the image move outside of the bounds of the viewer\n      let newX = currentCard.image.viewerX - deltaX;\n      let newY = currentCard.image.viewerY - deltaY;\n      newX = (newX > 0) ? 0 : newX;\n      newX = (newX < -(currentCard.image.viewerWidth - viewerWidth)) ? -(currentCard.image.viewerWidth - viewerWidth) : newX;\n      newY = (newY > 0) ? 0 : newY;\n      newY = (newY < -(currentCard.image.viewerHeight - viewerHeight)) ? -(currentCard.image.viewerHeight - viewerHeight) : newY;\n\n      //click to drag/move image\n      let tempCard = updateAndReturnCurrentCard(\"image\", {\n        ...currentCard.image,\n        x: Math.round(newX/magnifyValue),   //need to round cuz react-pdf doesnt like decimals\n        y: Math.round(newY/magnifyValue),\n        viewerX: newX,\n        viewerY: newY,\n      });\n      setCurrentCard(tempCard);\n    }\n  }\n\n  //debug how PDF looks faster with PDFViewer built into browser, so you dont have to download each time\n  let embeddedPDF = (\n    <div className=\"EmbeddedPDFViewer\" style={{\n      width: viewerWidth,\n      height: viewerHeight\n    }}></div>\n  )\n  if (!startingCoords){\n    embeddedPDF = (\n      <div>\n        <PDFViewer className=\"EmbeddedPDFViewer\" width={viewerWidth} height={viewerHeight}>\n          <PDFDocument cards={props.cards}/>\n        </PDFViewer>\n        <p>\n          ({currentCard.image.x + \", \" + currentCard.image.y})\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <div>\n        <CardViewer\n          currentCard={currentCard}\n          handleMouseDown={handleMouseDown}\n          handleMouseUp={handleMouseUp}\n          handleMouseMove={handleMouseMove}\n        />\n        {embeddedPDF}\n      </div>\n      <InputWrapper\n        handleInputChange={handleInputChange}\n        currentCard={currentCard}\n      />\n    </div>\n  );\n}\n\nfunction getMouseXY(e){\n  let rect = e.currentTarget.getBoundingClientRect();\n  return {\n    x: e.clientX - rect.left, //x position within the element.\n    y: e.clientY - rect.top,  //y position within the element.\n  }\n}\n\nexport default CardEditor;\n"]},"metadata":{},"sourceType":"module"}