{"ast":null,"code":"var _jsxFileName = \"/Users/1min/Documents/sharehome/src/components/CardEditor/CardEditor.js\";\nimport React, { useState } from 'react'; //custom files\n\nimport PDFDocument from './PDFDocument.js';\nimport downloadPDFFile from '../utils/downloadPDFFile.js';\nimport { getCoverFitObjectXY } from './CardConstants.js';\nimport { viewerHeight, viewerWidth } from '../../css/PDFViewerDynamicStyles.js';\nimport CardViewer from './CardViewer.js';\nimport InputWrapper from './InputWrapper.js'; //wrapper for card editor section (including input + PDF)\n//needs to get via props, the currentCard and setter for changing currentCard properties\n\nfunction CardEditor(props) {\n  const currentCard = props.currentCard;\n  const setCurrentCard = props.setCurrentCard; //returns a new card details object with newValue for newProp\n\n  const updateAndReturnCurrentCard = (newProp, newValue) => {\n    return { ...currentCard,\n      [newProp]: newValue\n    };\n  }; //event handlers for inputs\n\n\n  const handleInputChange = e => {\n    switch (e.target.name) {\n      case 'image':\n        if (e.target.files[0]) {\n          const tempImageURL = URL.createObjectURL(e.target.files[0]);\n          const tempImageName = e.target.files[0].name; //get new details (width / height) of uploaded image\n\n          let img = new Image();\n\n          img.onload = function () {\n            let renderedObjectXY = getCoverFitObjectXY(img.width, img.height, viewerHeight, viewerWidth);\n            let tempCard = updateAndReturnCurrentCard(\"image\", {\n              url: tempImageURL,\n              name: tempImageName,\n              x: renderedObjectXY.x,\n              y: renderedObjectXY.y\n            });\n            setCurrentCard(tempCard);\n            URL.revokeObjectURL(tempImageURL);\n          };\n\n          img.src = tempImageURL;\n        }\n\n        break;\n\n      case 'download':\n        downloadPDFFile( /*#__PURE__*/React.createElement(PDFDocument, {\n          cards: props.cards,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 25\n          }\n        }), currentCard.name + \".pdf\");\n        break;\n\n      default:\n        setCurrentCard(updateAndReturnCurrentCard(e.target.name, e.target.value));\n        break;\n    }\n  }; //handling image movement\n\n\n  const [startingCoords, setStartingCoords] = useState(false); //set starting coordinates on mouse down\n\n  const handleMouseDown = e => {\n    setStartingCoords({\n      x: e.clientX,\n      y: e.clientY\n    });\n  };\n\n  const handleMouseUp = e => {\n    setStartingCoords(false);\n  };\n\n  const handleMouseMove = e => {\n    if (startingCoords) {\n      let newX = currentCard.image.x - startingCoords.x - e.clientX;\n      let newY = currentCard.image.y - startingCoords.y - e.clientY;\n      setStartingCoords({\n        x: e.clientX,\n        y: e.clientY\n      }); //e.clientY where mouse is\n      //e.target.clientHeight total height of container\n      //currentCard.image.height height of image\n\n      let tempCard = updateAndReturnCurrentCard(\"image\", { ...currentCard.image,\n        x: newX,\n        y: newY,\n        objectPosition: newX + \" \" + newY\n      });\n      setCurrentCard(tempCard);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardViewer, {\n    currentCard: currentCard,\n    handleMouseDown: handleMouseDown,\n    handleMouseUp: handleMouseUp,\n    handleMouseMove: handleMouseMove,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(InputWrapper, {\n    handleInputChange: handleInputChange,\n    currentCard: currentCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default CardEditor;","map":{"version":3,"sources":["/Users/1min/Documents/sharehome/src/components/CardEditor/CardEditor.js"],"names":["React","useState","PDFDocument","downloadPDFFile","getCoverFitObjectXY","viewerHeight","viewerWidth","CardViewer","InputWrapper","CardEditor","props","currentCard","setCurrentCard","updateAndReturnCurrentCard","newProp","newValue","handleInputChange","e","target","name","files","tempImageURL","URL","createObjectURL","tempImageName","img","Image","onload","renderedObjectXY","width","height","tempCard","url","x","y","revokeObjectURL","src","cards","value","startingCoords","setStartingCoords","handleMouseDown","clientX","clientY","handleMouseUp","handleMouseMove","newX","image","newY","objectPosition"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\n\n//custom files\nimport PDFDocument from './PDFDocument.js';\nimport downloadPDFFile from '../utils/downloadPDFFile.js';\nimport { getCoverFitObjectXY } from './CardConstants.js';\nimport { viewerHeight, viewerWidth } from '../../css/PDFViewerDynamicStyles.js';\nimport CardViewer from './CardViewer.js';\nimport InputWrapper from './InputWrapper.js';\n\n//wrapper for card editor section (including input + PDF)\n//needs to get via props, the currentCard and setter for changing currentCard properties\nfunction CardEditor(props){\n  const currentCard = props.currentCard;\n  const setCurrentCard = props.setCurrentCard;\n\n  //returns a new card details object with newValue for newProp\n  const updateAndReturnCurrentCard = (newProp, newValue) => {\n    return {\n      ...currentCard,\n      [newProp]: newValue\n    }\n  }\n\n  //event handlers for inputs\n  const handleInputChange = (e) => {\n    switch (e.target.name) {\n      case 'image':\n        if (e.target.files[0]){\n          const tempImageURL = URL.createObjectURL(e.target.files[0]);\n          const tempImageName = e.target.files[0].name;\n\n          //get new details (width / height) of uploaded image\n          let img = new Image();\n          img.onload = function () {\n            let renderedObjectXY = getCoverFitObjectXY(img.width, img.height, viewerHeight, viewerWidth);\n            let tempCard = updateAndReturnCurrentCard(\"image\", {\n              url: tempImageURL,\n              name: tempImageName,\n              x: renderedObjectXY.x,\n              y: renderedObjectXY.y,\n            });\n            setCurrentCard(tempCard);\n            URL.revokeObjectURL(tempImageURL);\n          };\n          img.src = tempImageURL;\n        }\n        break;\n      case 'download':\n        downloadPDFFile(<PDFDocument\n          cards={props.cards}\n        />, currentCard.name + \".pdf\");\n        break;\n      default:\n        setCurrentCard(updateAndReturnCurrentCard(e.target.name, e.target.value));\n        break;\n    }\n  }\n\n  //handling image movement\n  const [startingCoords, setStartingCoords] = useState(false);\n\n  //set starting coordinates on mouse down\n  const handleMouseDown = (e) => {\n    setStartingCoords({\n      x: e.clientX,\n      y: e.clientY\n    });\n  }\n  const handleMouseUp = (e) => {\n    setStartingCoords(false);\n  }\n  const handleMouseMove = (e) => {\n    if (startingCoords){\n      let newX = currentCard.image.x - startingCoords.x - e.clientX;\n      let newY = currentCard.image.y - startingCoords.y - e.clientY;\n      setStartingCoords({\n        x: e.clientX,\n        y: e.clientY\n      });\n\n      //e.clientY where mouse is\n      //e.target.clientHeight total height of container\n      //currentCard.image.height height of image\n      let tempCard = updateAndReturnCurrentCard(\"image\", {\n        ...currentCard.image,\n        x: newX,\n        y: newY,\n        objectPosition: newX + \" \" + newY\n      });\n      setCurrentCard(tempCard);\n    }\n  }\n\n  return (\n    <div>\n      <CardViewer\n        currentCard={currentCard}\n        handleMouseDown={handleMouseDown}\n        handleMouseUp={handleMouseUp}\n        handleMouseMove={handleMouseMove}\n      />\n      <InputWrapper\n        handleInputChange={handleInputChange}\n        currentCard={currentCard}\n      />\n    </div>\n  );\n}\n\nexport default CardEditor;\n"]},"metadata":{},"sourceType":"module"}