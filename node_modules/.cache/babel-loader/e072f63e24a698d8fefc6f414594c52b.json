{"ast":null,"code":"var _jsxFileName = \"/Users/1min/Documents/sharehome/src/components/DeckEditor/DeckEditor.js\";\nimport React, { useState, useReducer, useRef, useEffect } from 'react'; //custom files\n\nimport * as CardConstants from '../CardEditor/CardConstants.js';\nimport '../../css/DeckEditor.css';\nimport { DebugButtons } from '../utils/DebugTools.js';\nimport downloadPDFFile from '../utils/downloadPDFFile.js';\nimport PDFDocument from './PDFDocument.js';\nimport CardPreview from './CardPreview.js';\nimport CardEditor from '../CardEditor/CardEditor.js'; //reducer to change state in react\n//to add a new card use dispatch({ type: 'add', item: movie })\n//to remove an existing card use dispatch({ type: 'remove', index })\n//to update an existing card use dispatch({ type: 'update', index, value, property })\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'add':\n      return [...state, action.card];\n\n    case 'remove':\n      return state.filter((item, index) => {\n        //remove item at index\n        if (index === action.index) {\n          return false;\n        } // //remove item with property with value\n        // else if (item[action.property] === action.value){\n        //   return false;\n        // }\n        //every other item stays\n\n\n        return true;\n      });\n\n    case 'update':\n      return state.map((item, index) => {\n        //replace the item at index\n        if (index === action.index) {\n          return action.card;\n        } //leave every other item unchanged\n\n\n        return item;\n      });\n\n    case 'reset':\n      return [action.card];\n\n    default:\n      throw new Error();\n  }\n} //wrapper for card editor section (including input + PDF)\n\n\nlet currentCard = CardConstants.getDefaultCardObject();\n\nfunction DeckEditor() {\n  const [cards, dispatch] = useReducer(reducer, [currentCard]);\n  const currentCardRef = useRef(null);\n  const [currentIndex, setCurrentIndex] = useState(0); //updates the current card and updates it in the cards array\n\n  const updateCurrentCard = card => {\n    currentCard = card;\n    dispatch({\n      type: 'update',\n      index: currentIndex,\n      card: currentCard\n    }); //if i want to implement an undo, i have access to what the card WAS here\n    //just need to keep this in an array and access it whenever\n    // console.log(cards[currentIndex]);\n  }; //download the PDF file\n\n\n  const downloadAllCards = () => {\n    downloadPDFFile( /*#__PURE__*/React.createElement(PDFDocument, {\n      cards: cards,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }), \"SHAREHOME_Deck.pdf\");\n  }; //deletes all cards and resets index to 0\n\n\n  const resetAllCards = () => {\n    currentCard = CardConstants.getDefaultCardObject();\n    dispatch({\n      type: 'reset',\n      card: currentCard\n    });\n    setCurrentIndex(0);\n  }; //adds a new card and sets the index to last\n\n\n  const addNewCard = () => {\n    currentCard = CardConstants.getDefaultCardObject();\n    dispatch({\n      type: 'add',\n      card: currentCard\n    });\n    setCurrentIndex(cards.length);\n  }; //deletes the current card and sets the index to last\n\n\n  const removeCurrentCard = () => {\n    const newLength = cards.length - 1; //if there are no more cards left, just reset\n\n    if (newLength <= 0) {\n      resetAllCards();\n    } else {\n      let newCurrentIndex = currentIndex - 1 <= 0 ? 0 : currentIndex - 1;\n      currentCard = cards[newCurrentIndex];\n      dispatch({\n        type: 'remove',\n        index: currentIndex\n      });\n      setCurrentIndex(newCurrentIndex);\n    }\n  }; //renders a specific card\n\n\n  const goToCard = cardIndex => {\n    setCurrentIndex(cardIndex);\n    currentCard = cards[cardIndex];\n  }; //renders a list of buttons to keep track of all cards in the deck (click to go to it)\n\n\n  const listOfCards = cards.map((step, move) => {\n    let cardPreviewProps = {\n      className: \"cardPreview\"\n    }; //current card is this button!\n\n    if (move === currentIndex) {\n      cardPreviewProps = {\n        className: \"cardPreview currentCard\",\n        ref: currentCardRef\n      };\n    }\n\n    return /*#__PURE__*/React.createElement(CardPreview, Object.assign({\n      key: \"cardPreview\" + move,\n      currentCard: step,\n      currentIndex: move,\n      handleClick: goToCard\n    }, cardPreviewProps, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 7\n      }\n    }));\n  }); //focus the current card in the preview pane\n\n  useEffect(() => {\n    if (currentCardRef.current) {\n      console.log(\"whatt\");\n      currentCardRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar sidebarButtonWrapper sidebarContent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"sideBarButton\",\n    onClick: addNewCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, \"Add New Card\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"sideBarButton\",\n    onClick: removeCurrentCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, \"Remove Current Card\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"sideBarButton\",\n    onClick: downloadAllCards,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, \"Download All Cards\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"sideBarButton\",\n    onClick: resetAllCards,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  }, \"Reset All Cards\"), /*#__PURE__*/React.createElement(DebugButtons, {\n    currentCard: currentCard,\n    currentIndex: currentIndex,\n    cards: cards,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cardPreviewWrapper sidebarContent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, listOfCards)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardEditor, {\n    cards: cards,\n    currentCard: currentCard,\n    setCurrentCard: updateCurrentCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default DeckEditor;","map":{"version":3,"sources":["/Users/1min/Documents/sharehome/src/components/DeckEditor/DeckEditor.js"],"names":["React","useState","useReducer","useRef","useEffect","CardConstants","DebugButtons","downloadPDFFile","PDFDocument","CardPreview","CardEditor","reducer","state","action","type","card","filter","item","index","map","Error","currentCard","getDefaultCardObject","DeckEditor","cards","dispatch","currentCardRef","currentIndex","setCurrentIndex","updateCurrentCard","downloadAllCards","resetAllCards","addNewCard","length","removeCurrentCard","newLength","newCurrentIndex","goToCard","cardIndex","listOfCards","step","move","cardPreviewProps","className","ref","current","console","log","scrollIntoView","behavior"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useRef, useEffect } from 'react';\n\n//custom files\nimport * as CardConstants from '../CardEditor/CardConstants.js';\nimport '../../css/DeckEditor.css';\nimport { DebugButtons } from '../utils/DebugTools.js';\nimport downloadPDFFile from '../utils/downloadPDFFile.js';\nimport PDFDocument from './PDFDocument.js';\nimport CardPreview from './CardPreview.js';\nimport CardEditor from '../CardEditor/CardEditor.js';\n\n//reducer to change state in react\n//to add a new card use dispatch({ type: 'add', item: movie })\n//to remove an existing card use dispatch({ type: 'remove', index })\n//to update an existing card use dispatch({ type: 'update', index, value, property })\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'add':\n      return [...state, action.card];\n    case 'remove':\n      return state.filter((item, index) => {\n        //remove item at index\n        if(index === action.index) {\n          return false;\n        }\n        // //remove item with property with value\n        // else if (item[action.property] === action.value){\n        //   return false;\n        // }\n        //every other item stays\n        return true;\n      });\n    case 'update':\n      return state.map((item, index) => {\n        //replace the item at index\n        if(index === action.index) {\n          return action.card;\n        }\n        //leave every other item unchanged\n        return item;\n      });\n    case 'reset':\n      return [action.card];\n    default:\n      throw new Error();\n  }\n}\n\n//wrapper for card editor section (including input + PDF)\nlet currentCard = CardConstants.getDefaultCardObject();\nfunction DeckEditor(){\n  const [cards, dispatch] = useReducer(reducer, [currentCard]);\n  const currentCardRef = useRef(null);\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  //updates the current card and updates it in the cards array\n  const updateCurrentCard = (card) => {\n    currentCard = card;\n    dispatch({\n      type: 'update',\n      index: currentIndex,\n      card: currentCard\n    });\n\n    //if i want to implement an undo, i have access to what the card WAS here\n    //just need to keep this in an array and access it whenever\n    // console.log(cards[currentIndex]);\n  }\n\n  //download the PDF file\n  const downloadAllCards = () => {\n    downloadPDFFile(<PDFDocument\n      cards={cards}\n    />, \"SHAREHOME_Deck.pdf\");\n  }\n\n  //deletes all cards and resets index to 0\n  const resetAllCards = () => {\n    currentCard = CardConstants.getDefaultCardObject();\n    dispatch({\n      type: 'reset',\n      card: currentCard\n    });\n    setCurrentIndex(0);\n  }\n\n  //adds a new card and sets the index to last\n  const addNewCard = () => {\n    currentCard = CardConstants.getDefaultCardObject();\n    dispatch({\n      type: 'add',\n      card: currentCard\n    });\n    setCurrentIndex(cards.length);\n  }\n\n  //deletes the current card and sets the index to last\n  const removeCurrentCard = () => {\n    const newLength = cards.length - 1;\n    //if there are no more cards left, just reset\n    if (newLength <= 0){\n      resetAllCards();\n    }\n    else {\n      let newCurrentIndex = (currentIndex - 1 <=0 ) ? 0 : currentIndex - 1;\n      currentCard = cards[newCurrentIndex];\n      dispatch({\n        type: 'remove',\n        index: currentIndex\n      });\n      setCurrentIndex(newCurrentIndex);\n    }\n  }\n\n  //renders a specific card\n  const goToCard = (cardIndex) => {\n    setCurrentIndex(cardIndex);\n    currentCard = cards[cardIndex];\n  }\n\n  //renders a list of buttons to keep track of all cards in the deck (click to go to it)\n  const listOfCards = cards.map((step, move) => {\n    let cardPreviewProps = {\n      className : \"cardPreview\",\n    }\n\n    //current card is this button!\n    if (move === currentIndex){\n      cardPreviewProps = {\n        className : \"cardPreview currentCard\",\n        ref : currentCardRef,\n      }\n    }\n\n    return (\n      <CardPreview\n        key={\"cardPreview\" + move}\n        currentCard={step}\n        currentIndex={move}\n        handleClick={goToCard}\n        {...cardPreviewProps}\n      />\n    );\n  });\n\n  //focus the current card in the preview pane\n  useEffect(()=>{\n    if (currentCardRef.current){\n      console.log(\"whatt\")\n      currentCardRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  });\n\n  return (\n    <div>\n      <div className=\"sidebar\">\n        <div className=\"sidebar sidebarButtonWrapper sidebarContent\">\n          <button className=\"sideBarButton\" onClick={addNewCard}>Add New Card</button>\n          <button className=\"sideBarButton\" onClick={removeCurrentCard}>Remove Current Card</button>\n          <button className=\"sideBarButton\" onClick={downloadAllCards}>Download All Cards</button>\n          <button className=\"sideBarButton\" onClick={resetAllCards}>Reset All Cards</button>\n          <DebugButtons\n            currentCard={currentCard}\n            currentIndex={currentIndex}\n            cards={cards}\n          />\n        </div>\n        <div className=\"cardPreviewWrapper sidebarContent\">\n          {listOfCards}\n        </div>\n      </div>\n      <div className=\"content\">\n        <CardEditor\n          cards={cards}\n          currentCard={currentCard}\n          setCurrentCard={updateCurrentCard}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default DeckEditor;\n"]},"metadata":{},"sourceType":"module"}